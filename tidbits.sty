% == Id ==
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tidbits}[2023/08/26 maths package]

% == Pakete ==
\RequirePackage{amsmath,amssymb,amsfonts,amscd,mathtools,amsthm,tikz,wrapfig,stmaryrd,mathdots,color,colortbl}
\RequirePackage{bm,float,csquotes}
\RequirePackage{marvosym}
\RequirePackage{stmaryrd}
\RequirePackage{pdfpages}
\RequirePackage{graphicx}
\RequirePackage{nicefrac}
\RequirePackage[loose]{units}
\RequirePackage{manfnt} % Symbole
\RequirePackage{tkz-graph} % schöne Graphen
\RequirePackage[edges]{forest} % einfache reduzierte Bäume
  
% == Spezifische Infos  ==
% [/einfügen]
\newcommand{\WASLANG}{Unwahrscheinlickeitsrechnung 12}
\newcommand{\WASKURZ}{UWR12}
\newcommand{\WERLANG}{Max Mustermann 12345, Mara Musterfrau 67890}
\newcommand{\WERKURZ}{Max Mustermann, Mara Musterfrau}
\newcommand{\UNI}{Universität der Stadt}
\newcommand{\SEMESTER}{Sommersemester 2042}
\newcommand{\INSTITUT}{Institut für Forschung}
\newcommand{\LEHRENDE}{Prof. Dr. Smart, Assistent}
%[\einfügen]

\usepackage{fancyhdr}
    \lhead{\textbf{\WASKURZ Hausaufgabe \Blattnummer}}
    \chead{\today}
    \rhead{\WERKURZ}

\newcommand{\header}{
    \textbf{\UNI} \hfill {\SEMESTER}	\\
	\textbf{\INSTITUT} \hfill
	\LEHRENDE
	\begin{center}
		\LARGE{\textbf{\WASLANG\, - Hausaufgabe \Blattnummer}} \\\normalsize 
		\textsc{\WERLANG}
        \rule{\textwidth}{2pt}
	\end{center}
\normalsize
\pagestyle{fancy} % benutzt obigen kurzen Header
\thispagestyle{plain} % erste Seite ohne Kurz-Header
} % Header erfordert, dass am Anfang jedes Blattes mit \Blattnummer die aktuelle Version deklariert wird !

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={\WASKURZ-HA\Blattnummer},
    pdfpagemode=FullScreen,
    }

% Tabellenspalten-Typen mit automatischer Matheumgebung
\newcolumntype{C}{>{$}c<{$}}
\newcolumntype{L}{>{$}l<{$}}
\newcolumntype{R}{>{$}r<{$}}

% == Deklarationen ==
\renewcommand{\phi}{\varphi} % schöneres Phi
\newcommand{\eps}{\varepsilon} % schöneres Epsilon
\newcommand{\e}{\mathrm{e}} % aufrechtes e

 % misc
\newcommand{\abs}[1]{\left|#1\right|} % Absolutbetrag
\newcommand{\pts}[1]{\left(#1\right)} % Klammern
\newcommand{\dg}{^{\circ}} %Grad, innerer Kern
\newcommand{\limn}{\lim_{n \to \infty}} %Limes

\newcommand{\qt}[1]{\glqq #1\grqq} % deutsche Anführungszeichen

\newcommand{\RZ}[1]{\textup{\uppercase\expandafter{\romannumeral#1}}} % römische Ziffern

\let\stmaryrdLightning\lightning
\newcommand{\contradict}{\Large{\stmaryrdLightning}} % Widerspruchsblitz

\newcommand{\ii}{\mathrm{i}} %aufrechtes i

\DeclareMathOperator*{\esssup}{ess\,sup} % allgemeine Operatoren
\DeclareMathOperator*{\essinf}{ess\,inf}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

% Formatierungen
\newcommand{\supeq}[1]{\stackrel{\text{#1}}{=}} % übersetztes Gleichheitszeichen

% Mengen
\newcommand{\set}[1]{\left\{#1\right\}} % Menge
\DeclareMathOperator{\N}{\mathbb{N}} % natürliche
\DeclareMathOperator{\Z}{\mathbb{Z}} % ganze
\DeclareMathOperator{\Q}{\mathbb{Q}} % rationale
\DeclareMathOperator{\R}{\mathbb{R}} % reelle
\DeclareMathOperator{\C}{\mathbb{C}} % komplexe
\DeclareMathOperator{\Prim}{\mathbb{P}} % Primzahlen
\DeclareMathOperator{\K}{\mathbb{K}} % Körper
\renewcommand{\P}{\mathcal{P}} % Potenzmenge
\renewcommand{\c}{^\complement} % Komplement
\DeclareMathOperator{\wo}{\backslash} % Ausschluss
\newcommand{\ocup}{\dot{\cup}} % disjunkte Vereinigung

% Matrizen und lineare Abbildungen
\DeclareMathOperator{\rang}{rang} % Rang
\DeclareMathOperator{\tr}{tr} % Spur 
\newcommand{\T}{^{\mkern-1.5mu\mathsf{T}}} % Transposition
\newcommand{\inv}{^{-1}} % Inverse
\newcommand{\Id}[1][n]{\mathrm{I}_{#1\times #1}} %Identität auf Ringen von quadratischen Matrizen
\newcommand{\Null}[1][n]{\mathrm{0}_{#1 \times #1}} % Nullelement -||-
\DeclareMathOperator{\nullv}{\mathcal{O}} %Nullvektor
\DeclareMathOperator{\GL}{GL} % Menge der invertierbaren Matrizen
\DeclareMathOperator{\CO}{\mathcal{C}} % Menge der stetigen Funktionen
\let\Im\relax\DeclareMathOperator{\Im}{Im} % Bild
\DeclareMathOperator{\Ker}{Kern} % Kern
\let\ker\relax\DeclareMathOperator{\ker}{Kern}
\DeclareMathOperator{\Hom}{Hom} % Homomorphismen
\newcommand{\Eig}[1]{\mathrm{Eig}(#1)} %Eigenraum
\DeclareMathOperator{\id}{id} % Identitätsabbildung
\newcommand{\?}[1]{\multicolumn{1}{c|}{#1}} % vertikale Linien in Matrizen
\newcommand{\lra}[1]{\left\langle #1 \right\rangle} % Span, Erzeugnis

% Befehl für erweiterte Koeffizientenmatrix
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother

%Algebra und Kombinatorik
\newcommand{\ggT}[1]{\mathrm{ggT}(#1)} % größter gemeinsamer Teiler
\DeclareMathOperator{\sgn}{sgn} % Signum einer Permutation
\newcommand{\ord}{\mathrm{ord}} % Ordnung eines Gruppenelements

% Normen
\newcommand{\norm}[1]{\left\lVert#1\right\rVert} % allg. Norm
\newcommand{\normeuk}[1]{\left\lVert#1\right\rVert_2} % euklidische Norm
\newcommand{\normmax}[1]{\left\lVert#1\right\rVert_{\infty}} % Supremums-/Maximumsnorm
\newcommand{\normop}[1]{\left\lVert#1\right\rVert_{\mathrm{op}}} % Operatornorm

% Differentialrechnung
\DeclareMathOperator{\grad}{\mathrm{grad}} % Gradient
\DeclareMathOperator{\diverg}{\mathrm{div}} % Divergenz
\DeclareMathOperator{\rot}{\mathrm{rot}} % Rotation
\newcommand{\dd}{\mathrm{d}} % aufrechtes d
    \newcommand{\dx}{\mathrm{d}x} % dx
    \newcommand{\dy}{\mathrm{d}y} % dy
    \newcommand{\dmu}{\mathrm{d}\mu} % dy
    \newcommand{\dlam}{\mathrm{d}\lambda} % dy
    \newcommand{\dt}{\mathrm{d}t} %dt

% Maßtheorie
\newcommand{\SigA}{$\sigma$-Algebra } 
\DeclareMathOperator{\A}{\mathcal{A}} % Sigma-Algebra
\DeclareMathOperator{\F}{\mathcal{F}} %  mehr Sigma-Algebren
\DeclareMathOperator{\B}{\mathfrak{B}} % Borel
\DeclareMathOperator{\cE}{\mathcal{E}} % Bild-Sigma-Algebra
\DeclareMathOperator{\G}{\mathcal{G}} % gute Mengen
\DeclareMathOperator{\PP}{\mathbb{P}} % W-Maß
\DeclareMathOperator{\Reg}{\mathcal{R}_{eg}} % Ring der elementargeometrischen Mengen
\newcommand{\bim}{\mu \circ g\inv} % Bildmaß 
\newcommand{\conv}[1]{\mathrm{conv}(\{#1\})} % konvexe Hülle

% Wahrscheinlickeitstheorie
\newcommand{\1}{\mathds{1}} % Indikatorfunktion
\newcommand{\X}{\mathbb{X}} % Zufallsvektor
\DeclareMathOperator{\E}{\mathbb{E}} % Erwartungswert
\DeclareMathOperator{\cov}{Cov} % Kovarianz
\DeclareMathOperator{\var}{Var} % Varianz
    % WT-Konergenzbegriffe
    \newcommand{\pconv}{\overset{\PP}{\longrightarrow}} % stochastisch
    \newcommand{\dconv}{\overset{d}{\longrightarrow}} % in Verteilung
    \newcommand{\wconv}{\overset{w}{\longrightarrow}} % schwach (= in Verteilung)
    \newcommand{\fsconv}{\overset{f.s.}{\longrightarrow}} % fast sicher

%rotierte Dinge
\newcommand\Copi{\rotatebox[origin=c]{180}{$\prod$}}


% == Umgebungen == 

\newtheorem*{toshow}{Z.z} % Abgesetzte Theoreme
\newtheorem*{theorem}{Satz} % füge [von ...] hinzu o.ä.
\newtheorem{lemma}{Lemma} %lemmata 

\usepackage{framed}
\setlength{\OuterFrameSep}{0pt}
\renewenvironment{leftbar}[1][\hsize]
{%
    \def\FrameCommand
    {%
        {\vrule width 3pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{gray!10!white}%
    }%
    \MakeFramed{\hsize#1\advance\hsize-\width\FrameRestore}%
}
{\endMakeFramed}

    %Aufgabe
\newcounter{Aufgabe}

\newenvironment{Aufgabe}[1][\hsize]
{%
    \refstepcounter{Aufgabe}
    \def\FrameCommand
    {%
        {\vrule width 3pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{gray!10!white}%
    }%
    \MakeFramed{\hsize#1 \textbf{Aufgabe \Blattnummer.\theAufgabe. {}}\advance\hsize-\width\FrameRestore}%
}
{\endMakeFramed}

\newcommand{\task}{\begin{Aufgabe}\end{Aufgabe}\nointerlineskip} % Aufgabenumgebung kompakt

\newcounter{subtaskc}[Aufgabe] % Teilaufgabenzähler
% Teilaufgabe
\newcommand{\subtask}{
\stepcounter{subtaskc}
%{\vrule width 3pt}
\textbf{Teilaufgabe (\roman{subtaskc}):\quad}  
%alph for lc letters; roman for i,ii; Alph for uc
}
%
\newenvironment{leftbar1}[1][\hsize]
{%
    \def\FrameCommand
    {%
        {\vrule width 3pt}%
        \hspace{6pt}%must no space.
        \fboxsep2pt
        \colorbox{white}%
    }%
    \MakeFramed{\hsize#1\advance\hsize-\width\FrameRestore}%
    \nointerlineskip
}
{\endMakeFramed}

 % Zusatzaufgaben
 \newcommand{\zusatz}{\begin{Zusatz}\end{Zusatz}\nointerlineskip} 

% Schabernack
\def\uiv{%
  \kern-.1em\lower.3ex\hbox{u}\kern-.12em
  \lower.1ex\hbox{n}\kern-.08em
  \lower.25ex\hbox{a}\kern-.11em
  \lower.2ex\hbox{b}\kern-.09em
  \lower.15ex\hbox{h}\kern-.1em
  \lower-.05ex\hbox{\"a}\kern-.13em
  \lower.22ex\hbox{n}\kern-.14em
  \lower.3ex\hbox{g}\kern-.09em
  \lower.1ex\hbox{i}\kern-.15em
  \lower.3ex\hbox{g}\kern-.13em
  \lower.2ex\hbox{ }%
  \kern-.1em\lower.2ex\hbox{u}\kern-.11em
  \lower.15ex\hbox{n}\kern-.1em
  \lower.2ex\hbox{d}\kern-.12em
  \lower.1ex\hbox{ }%
  \kern-.1em\lower.2ex\hbox{i}\kern-.09em
  \lower.2ex\hbox{d}\kern-.1em
  \lower.25ex\hbox{e}\kern-.11em
  \lower.11ex\hbox{n}\kern-.1em
  \lower-.05ex\hbox{t}\kern-.12em
  \lower.15ex\hbox{i}\kern-.13em
  \lower.2ex\hbox{s}\kern-.09em
  \lower.3ex\hbox{c}\kern-.14em
  \lower.1ex\hbox{h}\kern-.11em
  \lower.2ex\hbox{ }%
  \kern-.1em\lower.15ex\hbox{v}\kern-.1em
  \lower.2ex\hbox{e}\kern-.13em
  \lower.25ex\hbox{r}\kern-.1em
  \lower.3ex\hbox{t}\kern-.14em
  \lower.18ex\hbox{e}\kern-.1em
  \lower.2ex\hbox{i}\kern-.09em
  \lower-.1ex\hbox{l}\kern-.1em
  \lower.2ex\hbox{t}%
  }

%TODO