% == Id ==
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tidbits}[2023/08/26 maths package]

% == Pakete ==
\RequirePackage{amsmath,amssymb,amsfonts,amscd,mathtools,amsthm,tikz,wrapfig,stmaryrd,mathdots,color,colortbl}
\RequirePackage{bm,float,csquotes}
\RequirePackage{marvosym}
\RequirePackage{stmaryrd}
\RequirePackage{pdfpages}
\RequirePackage{graphicx}
  
% == Spezifische Infos  ==
% [/einfügen]
\newcommand{\WASLANG}{Unwahrscheinlickeitsrechnung 12}
\newcommand{\WASKURZ}{UWR12}
\newcommand{\WERLANG}{Max Mustermann 12345, Mara Musterfrau 67890}
\newcommand{\WERKURZ}{Max Mustermann, Mara Musterfrau}
\newcommand{\UNI}{Universität der Stadt}
\newcommand{\SEMESTER}{Sommersemester 2042}
\newcommand{\INSTITUT}{Institut für Forschung}
\newcommand{\LEHRENDE}{Prof. Dr. Smart, Assistent}
%[\einfügen]

\usepackage{fancyhdr}
    \lhead{\textbf{\WASKURZ Hausaufgabe \Blattnummer}}
    \chead{\today}
    \rhead{\WERKURZ}

\newcommand{\header}{
    \textbf{\UNI} \hfill {\SEMESTER}	\\
	\textbf{\INSTITUT} \hfill
	\LEHRENDE
	\begin{center}
		\LARGE{\textbf{\WASLANG\, - Hausaufgabe \Blattnummer}} \\\normalsize 
		\textsc{\WERLANG}
        \rule{\textwidth}{2pt}
	\end{center}
\normalsize
\pagestyle{fancy} % benutzt obigen kurzen Header
\thispagestyle{plain} % erste Seite ohne Kurz-Header
} % Header erfordert, dass am Anfang jedes Blattes mit \Blattnummer die aktuelle Version deklariert wird !

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={\WASKURZ-HA\Blattnummer},
    pdfpagemode=FullScreen,
    }
    
% == Deklarationen ==
\renewcommand{\phi}{\varphi} % schöneres Phi
\newcommand{\eps}{\varepsilon} % schöneres Epsilon
\newcommand{\e}{\mathrm{e}} % aufrechtes e

\newcommand{\abs}[1]{\left|#1\right|} % Absolutbetrag
\newcommand{\pts}[1]{\left(#1\right)} % Klammern
\newcommand{\lra}[1]{\left\langle #1 \right\rangle} % Span, Erzeugnis

\newcommand{\qt}[1]{\glqq #1\grqq} % deutsche Anführungszeichen

\newcommand{\RZ}[1]{\textup{\uppercase\expandafter{\romannumeral#1}}} % römische Ziffern

% Mengen
\DeclareMathOperator{\N}{\mathbb{N}} % natürliche
\DeclareMathOperator{\Z}{\mathbb{Z}} % ganze
\DeclareMathOperator{\Q}{\mathbb{Q}} % rationale
\DeclareMathOperator{\R}{\mathbb{R}} % reelle
\DeclareMathOperator{\C}{\mathbb{C}} % komplexe
\DeclareMathOperator{\Prim}{\mathbb{P}} % Primzahlen
\DeclareMathOperator{\K}{\mathbb{K}} % Körper
\renewcommand{\P}{\mathcal{P}} % Potenzmenge
\renewcommand{\c}{^\complement} % Komplement
\DeclareMathOperator{\wo}{\backslash} % Ausschluss

% Matrizen und lineare Abbildungen
\DeclareMathOperator{\rang}{rang} % Rang
\DeclareMathOperator{\tr}{tr} % Spur 
\newcommand{\Id}[1][n]{\mathrm{I}_{#1\times #1}} %Identität auf Ringen von quadratischen Matrizen
\newcommand{\Null}[1][n]{\mathrm{0}_{#1 \times #1}} % Nullelement -||-
\DeclareMathOperator{\nullv}{\mathcal{O}} %Nullvektor
\DeclareMathOperator{\GL}{GL} % Menge der invertierbaren Matrizen
\DeclareMathOperator{\CO}{\mathcal{C}} % Menge der stetigen Funktionen
\let\Im\relax\DeclareMathOperator{\Im}{Im} % Bild
\DeclareMathOperator{\Ker}{Kern} % Kern
\let\ker\relax\DeclareMathOperator{\ker}{Kern}
\DeclareMathOperator{\Hom}{Hom} % Homomorphismen
\newcommand{\T}{^{\mkern-1.5mu\mathsf{T}}} % Transposition
\newcommand{\inv}{^{-1}} % Inverse
\newcommand{\Eig}[1]{\mathrm{Eig}(#1)} %Eigenraum

%Algebra und Kombinatorik
\newcommand{\ggT}[1]{\mathrm{ggT}(#1)} % größter gemeinsamer Teiler
\DeclareMathOperator{\sgn}{sgn} % Signum einer Permutation

% Normen
\newcommand{\norm}[1]{\left\lVert#1\right\rVert} % allg. Norm
\newcommand{\normeuk}[1]{\left\lVert#1\right\rVert_2} % euklidische Norm
\newcommand{\normmax}[1]{\left\lVert#1\right\rVert_{\infty}} % Supremums-/Maximumsnorm
\newcommand{\normop}[1]{\left\lVert#1\right\rVert_{\mathrm{op}}} % Operatornorm

%Abbildungen
\DeclareMathOperator{\id}{id} % Identitätsabbildung

% == Umgebungen == 
\usepackage{framed}
\setlength{\OuterFrameSep}{0pt}
\renewenvironment{leftbar}[1][\hsize]
{%
    \def\FrameCommand
    {%
        {\vrule width 3pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{gray!10!white}%
    }%
    \MakeFramed{\hsize#1\advance\hsize-\width\FrameRestore}%
}
{\endMakeFramed}

    %Aufgabe
\newcounter{Aufgabe}

\newenvironment{Aufgabe}[1][\hsize]
{%
    \refstepcounter{Aufgabe}
    \def\FrameCommand
    {%
        {\vrule width 3pt}%
        \hspace{0pt}%must no space.
        \fboxsep=\FrameSep\colorbox{gray!10!white}%
    }%
    \MakeFramed{\hsize#1 \textbf{Aufgabe \Blattnummer.\theAufgabe. {}}\advance\hsize-\width\FrameRestore}%
}
{\endMakeFramed}

\newcommand{\task}{\begin{Aufgabe}\end{Aufgabe}\nointerlineskip} % Aufgabenumgebung kompakt

\newcounter{subtaskc}[Aufgabe] % Teilaufgabenzähler
% Teilaufgabe
\newcommand{\subtask}{
\stepcounter{subtaskc}
%{\vrule width 3pt}
\textbf{Teilaufgabe (\roman{subtaskc}):\quad}  
%alph for lc letters; roman for i,ii; Alph for uc
}
%
\newenvironment{leftbar1}[1][\hsize]
{%
    \def\FrameCommand
    {%
        {\vrule width 3pt}%
        \hspace{6pt}%must no space.
        \fboxsep2pt
        \colorbox{white}%
    }%
    \MakeFramed{\hsize#1\advance\hsize-\width\FrameRestore}%
    \nointerlineskip
}
{\endMakeFramed}

%TODO